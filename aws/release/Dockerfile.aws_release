FROM alpine:3.3

MAINTAINER KenCochrane <Ken.Cochrane@Docker.com>

RUN apk add --update bash ca-certificates jq groff python py-pip py-setuptools \
    && pip install awscli boto \
    && pip install https://s3.amazonaws.com/cloudformation-examples/aws-cfn-bootstrap-latest.tar.gz \
    && apk --purge -v del py-pip \
    && rm -rf /var/cache/apk/*

RUN mkdir -p /home/docker /home/docker/dist
ADD tmp/docker_for_aws.template /home/docker
ADD tmp/docker_for_aws_ddc.template /home/docker
ADD files/aws_release.py /home/docker
ADD files/release.sh /home/docker
RUN chmod 755 /home/docker/aws_release.py /home/docker/release.sh

CMD ["/home/docker/release.sh"]
