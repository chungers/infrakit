{{/* =% controllerCommit %= */}}

kind: script
metadata:
  name: test2
options:
  ChannelBufferSize : 1024
  # How long to wait before we start the execution of each step, in unit of time (ticks)
  WaitBeforeStart: 2
properties:
  use:
    - url: file://{{env `PWD`}}/docs/controller/script/index.yml
      as: pb
  targets:
    g1 :
      - A
      - B
      - C
      - D
      - E
      - F
      - G
      - H
      - I

  steps:
    - call: pb.op1
      params:
        message: this is pb.op1
      target: g1
      resultTemplate: $m := trim . | jsonDecode ; var `x` $m.message
      resultTemplateVar: x
    - call: pb.op2
